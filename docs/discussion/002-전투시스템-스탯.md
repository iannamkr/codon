# 논의 002: 전투 시스템 + 스탯

## 발단 — 전투 시스템 논의

게임 구조가 하이브리드(영속 연구실 + 짧은 출격)로 확정된 후, 전투 시스템 설계로 넘어감.

### 전제 조건

```
연구실에서 빌드 → 출격(3~7전투) → 귀환 → 빌드 조정 → 교배 → 반복
- 출격 1회 = 3~5분
- 개별 전투 = ~30초~1분
- 플랫폼 = WebView (모바일)
- 빌드 깊이 = 코돈 + 촉매 + 발현 트리 + 장비 (4축)
```

핵심 질문: 개별 전투에서 플레이어가 뭘 하느냐?

### 전투 방식 후보 3개

**방안 A: 풀 오토 — 빌드만 하고 전투는 관전**
- 전투 중 플레이어 입력: 없음. 모든 결정은 연구실에서.
- 레퍼런스: Super Auto Pets, 방치형 RPG
- 장점: "빌드의 결과를 확인"하는 쾌감. 모바일에 최적. 빌드 조정 동기가 명확. 개발 부담 적음
- 단점: 전투 자체가 지루할 수 있음. "게임을 플레이한다" 느낌 약함

**방안 B: 시퀀스 배치 — 전투 전 코돈 순서 결정**
- 전투 중 플레이어 입력: 배치 1회 (전투 시작 전)
- 레퍼런스: Super Auto Pets (배치) + 포커 (핸드 구성)
- 장점: "상대를 보고 배치를 바꾼다" = 전술적 재미. 간단하지만 깊이 있음
- 단점: 배치만으로 다양한 전략이 나오려면 코돈 간 순서 시너지 설계 필요

**방안 C: 턴제 전투 — 매 턴 코돈 선택**
- 전투 중 플레이어 입력: 매 턴 선택
- 레퍼런스: 포켓몬 (턴제 1v1) + StS (카드 선택)
- 장점: 가장 "게임다운" 느낌. 읽기 싸움
- 단점: 출격 내 5전투면 5~10분. 모바일에서 매 턴 입력은 피로

→ B로 방향 설정

### PvP 메타와 빌드 수렴 우려

사용자 의견:
> "어차피 poe도 그렇고 sts도 그렇고 시간이 지나면 최적화 빌드는 나오기 마련이야. 근데 그렇게 최적화 빌드가 나오더라도 우린 대전게임이기 때문에 카운터 빌드가 나올수도 있고."

→ PvP 메타 순환이 빌드 다양성을 자연적으로 유지. 최적 배치 수렴 문제는 PvP가 해결.

---

## 논의: 시퀀스 배치의 슬롯 수

사용자 질문:
> "시퀀스는 코돈 몇개를 배치하는거지?"

후보:
- A. 4슬롯: 빠름, 모바일 적합, 4!=24가지 순서. 단 빌드 표현 제한적
- B. 6슬롯: 빌드 표현 충분, 6!=720가지 순서. 30초면 충분
- C. 가변 슬롯: 시작 4 → 최대 6~8. 성장감 있지만 PvP 밸런싱 어려움

→ 미확정 (전투 판정 공식 설계 후 결정)

---

## 논의: 빌드와 시퀀스 배치의 관계

사용자 질문:
> "여기서 빌드라는건 시퀀스 배치를 포함하는 건가?"

분리:
- 빌드 = 연구실에서 하는 것 (코돈 선택, 촉매, 트리, 장비)
- 시퀀스 배치 = 전투에서 하는 것 (코돈 순서 정하기)

후보:
- A. 배치도 연구실에서 (빌드의 일부, 전투는 완전 자동)
- B. 배치는 전투마다 (전술, 상대 보고 순서 변경)

### 핵심 문제 제기

사용자:
> "근데 B로 가면 사용자가 코돈을 배치했을때 어떤 부가효과가 발동되서 내 빌드가 동작하는지를 전투 전에는 알 수가 없으니 빌드를 애초에 짤 수가 없잖아?"

분석:
```
시너지가 순서에 의존 → 순서를 알아야 빌드를 짤 수 있음
근데 순서는 전투마다 바뀜 → 빌드가 확정되지 않음
```

해결 방법 후보:

**방법 1: 순서를 빌드에 포함 (연구실에서 고정)**
- 빌드 = 코돈 선택 + 순서 + 촉매 + 트리 + 장비 전부 연구실에서 확정
- 전투 중 입력 = 없음 (관전)
- 장점: 빌드를 짤 때 시너지를 미리 보고 최적화 가능
- 단점: 전투 중 할 일이 없음

**방법 2: 시너지는 순서 무관, 순서는 매칭만 결정**
- 코돈 간 시너지 = 조합 자체에서 발생 (순서와 무관)
- 순서 = 어느 슬롯에서 상대와 부딪히느냐
- 장점: 빌드와 전술 깔끔 분리
- 단점: 순서의 깊이가 얕아짐

사용자:
> "방안 2로 간다면 빌드의 깊이가 너무 얕아질 것 같은데 방안 1로 가면서도 방안 2의 장점을 녹여내는 방법은?"

### 방법 1+2 결합 후보

**방법 A: 프리셋 전략 — 연구실에서 복수 배치를 미리 짜둠**
- 연구실에서 2~3개 프리셋 생성, 전투 시 선택
- 장점: 빌드 깊이 유지 + 전투에서 선택
- 단점: 프리셋 관리 = 차별성 떨어짐

**방법 B: 고정 시퀀스 + 와일드카드 슬롯**
- 6슬롯 중 4개 고정 + 2개 와일드카드 (전투 시 선택)
- 장점: 빌드 뼈대 유지 + 유연성
- 단점: 경계가 직관적이지 않음

**방법 C: 시퀀스 고정 + 전투 중 돌연변이 트리거**
- 연구실에서 순서 완전 고정 (시너지 확정)
- 전투 중 특정 조건에서 "변이 선택지" 등장 → 플레이어 판단
- 장점: 빌드 무결성 유지 + 전투 중 리스크/리턴 판단. 생물학 테마 일치
- 단점: 판단 포인트가 적을 수 있음

사용자:
> "프리셋을 관리하게 되면 우리 게임의 차별성이 너무 떨어지고 유니크함이 없어. 그리고 poe같은 경우도 여러 빌드 상태를 동시에 가질수는 없잖아? 바꾸려면 스킬 잼도 바꾸고 스킬 트리도 다시 분배해야하고 장비도 바꿔야하는데.. 그런 면에서 방법 C는 어떄? 방법 A는 그냥 내가 미리 빌드를 잔뜩 만들어 놓으면 장떙 아니야?"

### 방법 C 확장 — 영구 변이 + MUT 연동

**MUT 스탯과 연동:**
```
MUT 낮음 → 전투 중 변이 기회 0~1회 (안정적, 빌드 그대로 실행)
MUT 높음 → 전투 중 변이 기회 2~4회 (불안정, 하지만 매 판 개입 가능)
```
- MUT 자체가 "전투 중 개입도"를 결정하는 빌드 축이 됨

**변이 선택지 = 분기 (단순 yes/no 아님):**
```
변이 기회 등장 시:
  [A] 공격 변이: 위력 ×2.0, 대신 다음 코돈 비활성화
  [B] 방어 변이: 이번 코돈이 실드로 전환, 대신 데미지 0
  [C] 거부: 변이 안 함, 원래대로 실행
```

**영구 변이:**
- 전투 중 선택한 변이는 코돈을 영구 변형
- 귀환 후 빌드가 살짝 달라져 있음 → 재조정 필요
- 변이 누적 = 실험체 열화의 원인

**핵심 루프:**
1. 연구실: 완벽한 빌드 설계
2. 전투: 변이 선택 = 빌드를 "오염"시키는 대가로 즉각적 이득
3. 귀환: 오염된 빌드를 수리/적응/재설계
4. → 다시 1로

### 결정

**방법 C (시퀀스 고정 + 전투 중 영구 변이)** 확정.
- 빌드 = 연구실에서 100% 확정 (시너지 미리보기)
- 전투 = 자동 진행 + MUT에 비례한 변이 기회에서 플레이어 판단
- 변이 = 영구 → 전투가 빌드를 변화시킴 → 귀환 후 재조정 = 핵심 루프
- "전투가 빌드를 변화시킨다" = 우리 게임만의 유니크 구조

---

## 논의: 스탯 시스템

### Stat vs Attribute 구분

사용자:
> "아냐 stat과 attribute는 다른거야 일단 stat 부터 정의해야해"

구분:
- Stat = 전투 판정에 쓰이는 기본 수치 (HP, ATK, DEF 같은 것)
- Attribute = 실험체의 고유 특성/성질 (MUT, HRD 같은 것)

### 기본 스탯 후보

사용자:
> "기본 스탯구조는 제일 단순, 무난한거로 가되 우리만의 특별한 스탯 1~2개만 추가하는게 좋을 것 같은데"

기본 스탯으로 HP/ATK/DEF/SPD 4개를 제안했으나:

사용자:
> "poe2는 힘, 민첩, 지능 3개인데"

→ PoE2식으로 기본 스탯 3개, 전투 수치는 파생하는 구조로 방향 전환

### 기본 스탯 3개 후보

**A. PoE 그대로 — STR / DEX / INT**
- 무난하지만 생물학 테마와 안 맞음

**B. 생물학 기반 — VIG(활력) / AGI(기민) / ADT(적응)**
- 장점: 생물학 느낌 + 직관적
- 단점: 용어가 어려움

**C. DNA 테마 — REP(복제) / TRS(전사) / FLD(접힘)**
- 장점: 테마 강함
- 단점: 직관성 떨어짐

사용자:
> "B 가 좋은데 용어가 어려워"

→ 쉬운 네이밍 후보 제시

사용자:
> "힘, 민첩, 내성으로 가자"

### 결정 (1차)

기본 스탯 3개:
```
힘 (STR) → HP, 데미지
민첩 (DEX) → SPD, 선공
내성 (RES) → DEF, 속성 저항
```

특수 속성(MUT 등)은 Attribute로 별도 논의 예정이었으나...

---

## 논의: MUT를 기본 스탯으로 승격

Mewgenics의 스탯을 참고하면서 (STR/DEX/CON/INT/SPD/CHA/**Luck**), Luck이 "크리티컬 확률, 모든 랜덤 요소"를 관장하는 점에 주목.

사용자:
> "우리도 기본 스탯에 Luck대신 MUT를 넣을까?"

분석:
```
Mewgenics: STR / DEX / CON / INT / SPD / CHA / Luck
                                              ↑ 랜덤 요소 관장

우리:      힘 / 민첩 / 내성 / MUT
                              ↑ 변이 + 랜덤 요소 관장
```

장점:
- MUT는 이미 전투에 직접 영향 (변이 기회 횟수) → 스탯 자격 충분
- "기본 3개 + 우리만의 1개"로 처음에 말했던 구조와 정확히 일치
- Luck의 역할(크리티컬, 랜덤 요소)도 MUT가 흡수 가능
- 4스탯이면 교배 시 관리 부담도 적당

### 결정 (최종)

기본 스탯 4개 확정:
```
힘 (STR) → HP, 데미지
민첩 (DEX) → SPD, 선공
내성 (RES) → DEF, 속성 저항
변이 (MUT) → 전투 중 변이 횟수, 크리티컬, 변이 품질
```

MUT가 스탯으로 올라가면서 Attribute는 전투 외적(교배/유전/열화 등)만 남음.

---

## 최종 확정 사항

1. **전투 시스템**: 연구실에서 시퀀스 고정(빌드 확정) + 전투 중 변이 판단(MUT 연동, 영구 변이)
2. **전투 루프**: 완벽한 빌드 설계 → 전투 중 변이로 오염 → 귀환 후 재조정
3. **기본 스탯**: 힘(STR)/민첩(DEX)/내성(RES)/변이(MUT) 4개. 전투 수치는 파생
4. **Attribute**: 별도 논의 예정 (교배/유전/열화 관련 — HRD, LIB, Disorder 등 후보)
